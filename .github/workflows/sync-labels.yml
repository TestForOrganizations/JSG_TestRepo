name: Sync Labels from Organization

on:
  workflow_dispatch:
    inputs:
      confirm:
        description: '라벨 동기화를 진행하시겠습니까? (기존 라벨이 삭제됩니다)'
        required: true
        default: 'false'
        type: choice
        options:
          - 'false'
          - 'true'

permissions:
  issues: write
  contents: read

jobs:
  sync-labels:
    runs-on: ubuntu-latest
    if: github.event.inputs.confirm == 'true'
    
    # 직접 라벨 동기화 수행
    steps:
      - name: Sync labels using organization template
        uses: crazy-max/ghaction-github-labeler@v4
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          yaml-file: https://raw.githubusercontent.com/TestForOrganizations/.github/main/labels/labels.yml
          skip-delete: false
          delete-other-labels: true
          
      - name: Complete message
        run: |
          echo "🎉 라벨 동기화가 완료되었습니다!"
          echo "조직 표준 라벨이 이 레포지토리에 적용되었습니다."
